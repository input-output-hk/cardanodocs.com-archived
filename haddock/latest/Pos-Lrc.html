<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Lrc</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Lrc.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Lrc.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-0.4.3: Cardano SL main implementation</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Lrc</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Getters</a></li><li><a href="#g:2">Operations</a></li><li><a href="#g:3">Initialization</a></li><li><a href="#g:4">Initialization</a></li><li><a href="#g:5">Concrete instances</a><ul><li><a href="#g:6">Ssc</a></li><li><a href="#g:7">US</a></li><li><a href="#g:8">Delegation</a></li></ul></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:InvalidRichmenStake">InvalidRichmenStake</a> thd = <a href="#v:Invalid">Invalid</a> {<ul class="subs"><li><a href="#v:getInvalid">getInvalid</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ValidRichmenStake">ValidRichmenStake</a> thd = <a href="#v:Valid">Valid</a> {<ul class="subs"><li><a href="#v:getValid">getValid</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></li></ul>}</li><li class="src short"><a href="#v:allLrcConsumers">allLrcConsumers</a> :: (<a href="Pos-Ssc-Class.html#t:SscWorkersClass">SscWorkersClass</a> ssc, <a href="Pos-WorkMode.html#t:WorkMode">WorkMode</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDBCore">MonadDBCore</a> m) =&gt; [<a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Consumer.html#t:LrcConsumer">LrcConsumer</a> m]</li><li class="src short">module <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-DB-Common.html">Pos.Lrc.DB.Common</a></li><li class="src short">module <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-DB-Issuers.html">Pos.Lrc.DB.Issuers</a></li><li class="src short"><a href="#v:getLeaders">getLeaders</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:SlotLeaders">SlotLeaders</a>)</li><li class="src short"><a href="#v:putLeaders">putLeaders</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:SlotLeaders">SlotLeaders</a> -&gt; m ()</li><li class="src short"><a href="#v:prepareLrcLeaders">prepareLrcLeaders</a> :: (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; m ()</li><li class="src short"><a href="#v:prepareLrcDB">prepareLrcDB</a> :: (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; m ()</li><li class="src short"><a href="#v:prepareLrcRichmen">prepareLrcRichmen</a> :: (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:RCSsc">RCSsc</a></li><li class="src short"><a href="#v:getRichmenSsc">getRichmenSsc</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a>)</li><li class="src short"><a href="#v:putRichmenSsc">putRichmenSsc</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:RCUs">RCUs</a></li><li class="src short"><a href="#v:getRichmenUS">getRichmenUS</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a>)</li><li class="src short"><a href="#v:putRichmenUS">putRichmenUS</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:RCDlg">RCDlg</a></li><li class="src short"><a href="#v:getRichmenDlg">getRichmenDlg</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:Richmen">Richmen</a>)</li><li class="src short"><a href="#v:putRichmenDlg">putRichmenDlg</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; m ()</li><li class="src short">module <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-DB-Seed.html">Pos.Lrc.DB.Seed</a></li><li class="src short">module <a href="Pos-Lrc-FtsPure.html">Pos.Lrc.FtsPure</a></li><li class="src short"><a href="#v:findRichmenStake">findRichmenStake</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>) m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; m <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></li><li class="src short"><a href="#v:findRichmenPure">findRichmenPure</a> :: [(<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>)] -&gt; (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>) -&gt; <a href="Pos-Lrc.html#t:RichmenType">RichmenType</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a></li><li class="src short"><a href="#v:findAllRichmenMaybe">findAllRichmenMaybe</a> :: <span class="keyword">forall</span> m. (<a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>) m) =&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; m (<a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a>, <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a>)</li><li class="src short"><a href="#v:findDelegatedRichmen">findDelegatedRichmen</a> :: (<a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>) m) =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; m <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:RichmenType">RichmenType</a><ul class="subs"><li>= <a href="#v:RTUsual">RTUsual</a></li><li>| <a href="#v:RTDelegation">RTDelegation</a> (<a href="http://hackage.haskell.org/package/unordered-containers-0.2.8.0/docs/Data-HashMap-Lazy.html#t:HashMap">HashMap</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> [<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>])</li></ul></li><li class="src short"><a href="#v:lrcOnNewSlotWorker">lrcOnNewSlotWorker</a> :: (<a href="Pos-Ssc-Class.html#t:SscWorkersClass">SscWorkersClass</a> ssc, <a href="Pos-WorkMode.html#t:WorkMode">WorkMode</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDBCore">MonadDBCore</a> m) =&gt; m (<a href="http://hackage.haskell.org/package/containers-0.5.7.1/docs/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:NodeId">NodeId</a>) -&gt; (<a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:WorkerSpec">WorkerSpec</a> m, <a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:OutSpecs">OutSpecs</a>)</li><li class="src short"><a href="#v:lrcSingleShot">lrcSingleShot</a> :: (<a href="Pos-Ssc-Class.html#t:SscWorkersClass">SscWorkersClass</a> ssc, <a href="Pos-WorkMode.html#t:WorkMode">WorkMode</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDBCore">MonadDBCore</a> m) =&gt; m (<a href="http://hackage.haskell.org/package/containers-0.5.7.1/docs/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:NodeId">NodeId</a>) -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m ()</li><li class="src short"><a href="#v:lrcSingleShotNoLock">lrcSingleShotNoLock</a> :: (<a href="Pos-Ssc-Class.html#t:SscWorkersClass">SscWorkersClass</a> ssc, <a href="Pos-WorkMode.html#t:WorkMode">WorkMode</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDBCore">MonadDBCore</a> m) =&gt; m (<a href="http://hackage.haskell.org/package/containers-0.5.7.1/docs/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:NodeId">NodeId</a>) -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:InvalidRichmenStake" class="def">InvalidRichmenStake</a> thd <a href="src/Pos.Lrc.Arbitrary.html#InvalidRichmenStake" class="link">Source</a> <a href="#t:InvalidRichmenStake" class="selflink">#</a></p><div class="doc"><p>Wrapper over <code><a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></code>. Its <code><a href="http://hackage.haskell.org/package/QuickCheck-2.9.2/docs/Test-QuickCheck-Arbitrary.html#t:Arbitrary">Arbitrary</a></code> instance enforces that the stake
 distribution inside must be invalid, i.e. one of the stakeholders does not have
 sufficient coins to participate.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Invalid" class="def">Invalid</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getInvalid" class="def">getInvalid</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:InvalidRichmenStake" class="caption collapser" onclick="toggleSection('i:InvalidRichmenStake')">Instances</p><div id="section.i:InvalidRichmenStake" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:InvalidRichmenStake:Eq:1" class="instance expander" onclick="toggleSection('i:id:InvalidRichmenStake:Eq:1')"></span> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Eq.html#t:Eq">Eq</a> (<a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd)</span> <a href="src/Pos.Lrc.Arbitrary.html#line-40" class="link">Source</a> <a href="#t:InvalidRichmenStake" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:InvalidRichmenStake:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd -&gt; <a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd -&gt; <a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:InvalidRichmenStake:Show:2" class="instance expander" onclick="toggleSection('i:id:InvalidRichmenStake:Show:2')"></span> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:Show">Show</a> (<a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd)</span> <a href="src/Pos.Lrc.Arbitrary.html#line-40" class="link">Source</a> <a href="#t:InvalidRichmenStake" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:InvalidRichmenStake:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd] -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:InvalidRichmenStake:Arbitrary:3" class="instance expander" onclick="toggleSection('i:id:InvalidRichmenStake:Arbitrary:3')"></span> <a href="http://hackage.haskell.org/package/reflection-2.1.2/docs/Data-Reflection.html#t:Reifies">Reifies</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> thd <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:CoinPortion">CoinPortion</a> =&gt; <a href="http://hackage.haskell.org/package/QuickCheck-2.9.2/docs/Test-QuickCheck-Arbitrary.html#t:Arbitrary">Arbitrary</a> (<a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd)</span> <a href="src/Pos.Lrc.Arbitrary.html#line-42" class="link">Source</a> <a href="#t:InvalidRichmenStake" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:InvalidRichmenStake:Arbitrary:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: <a href="http://hackage.haskell.org/package/QuickCheck-2.9.2/docs/Test-QuickCheck-Gen.html#t:Gen">Gen</a> (<a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd) <a href="#v:arbitrary" class="selflink">#</a></p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd -&gt; [<a href="Pos-Lrc.html#t:InvalidRichmenStake">InvalidRichmenStake</a> thd] <a href="#v:shrink" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ValidRichmenStake" class="def">ValidRichmenStake</a> thd <a href="src/Pos.Lrc.Arbitrary.html#ValidRichmenStake" class="link">Source</a> <a href="#t:ValidRichmenStake" class="selflink">#</a></p><div class="doc"><p>Wrapper over <code><a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></code>. Its <code><a href="http://hackage.haskell.org/package/QuickCheck-2.9.2/docs/Test-QuickCheck-Arbitrary.html#t:Arbitrary">Arbitrary</a></code> instance enforces that the stake
 distribution inside must be valid with respect to the threshold <code>thd</code>, i.e. all of the
 coins are non-zero and every stakeholder has sufficient coins
 (above 'coinPortionToDouble thd' %) to participate.
 Using reflection, the <code>thd</code> phantom type is used to get the threshold desired in each
 case.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Valid" class="def">Valid</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getValid" class="def">getValid</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:ValidRichmenStake" class="caption collapser" onclick="toggleSection('i:ValidRichmenStake')">Instances</p><div id="section.i:ValidRichmenStake" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ValidRichmenStake:Eq:1" class="instance expander" onclick="toggleSection('i:id:ValidRichmenStake:Eq:1')"></span> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Eq.html#t:Eq">Eq</a> (<a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd)</span> <a href="src/Pos.Lrc.Arbitrary.html#line-30" class="link">Source</a> <a href="#t:ValidRichmenStake" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ValidRichmenStake:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd -&gt; <a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd -&gt; <a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ValidRichmenStake:Show:2" class="instance expander" onclick="toggleSection('i:id:ValidRichmenStake:Show:2')"></span> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:Show">Show</a> (<a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd)</span> <a href="src/Pos.Lrc.Arbitrary.html#line-30" class="link">Source</a> <a href="#t:ValidRichmenStake" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ValidRichmenStake:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd] -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ValidRichmenStake:Arbitrary:3" class="instance expander" onclick="toggleSection('i:id:ValidRichmenStake:Arbitrary:3')"></span> <a href="http://hackage.haskell.org/package/reflection-2.1.2/docs/Data-Reflection.html#t:Reifies">Reifies</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> thd <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:CoinPortion">CoinPortion</a> =&gt; <a href="http://hackage.haskell.org/package/QuickCheck-2.9.2/docs/Test-QuickCheck-Arbitrary.html#t:Arbitrary">Arbitrary</a> (<a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd)</span> <a href="src/Pos.Lrc.Arbitrary.html#line-32" class="link">Source</a> <a href="#t:ValidRichmenStake" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ValidRichmenStake:Arbitrary:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arbitrary">arbitrary</a> :: <a href="http://hackage.haskell.org/package/QuickCheck-2.9.2/docs/Test-QuickCheck-Gen.html#t:Gen">Gen</a> (<a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd) <a href="#v:arbitrary" class="selflink">#</a></p><p class="src"><a href="#v:shrink">shrink</a> :: <a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd -&gt; [<a href="Pos-Lrc.html#t:ValidRichmenStake">ValidRichmenStake</a> thd] <a href="#v:shrink" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:allLrcConsumers" class="def">allLrcConsumers</a> :: (<a href="Pos-Ssc-Class.html#t:SscWorkersClass">SscWorkersClass</a> ssc, <a href="Pos-WorkMode.html#t:WorkMode">WorkMode</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDBCore">MonadDBCore</a> m) =&gt; [<a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Consumer.html#t:LrcConsumer">LrcConsumer</a> m] <a href="src/Pos.Lrc.Consumers.html#allLrcConsumers" class="link">Source</a> <a href="#v:allLrcConsumers" class="selflink">#</a></p></div><div class="top"><p class="src">module <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-DB-Common.html">Pos.Lrc.DB.Common</a></p></div><div class="top"><p class="src">module <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-DB-Issuers.html">Pos.Lrc.DB.Issuers</a></p></div><h1 id="g:1">Getters</h1><div class="top"><p class="src"><a id="v:getLeaders" class="def">getLeaders</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:SlotLeaders">SlotLeaders</a>) <a href="src/Pos.Lrc.DB.Leaders.html#getLeaders" class="link">Source</a> <a href="#v:getLeaders" class="selflink">#</a></p></div><h1 id="g:2">Operations</h1><div class="top"><p class="src"><a id="v:putLeaders" class="def">putLeaders</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:SlotLeaders">SlotLeaders</a> -&gt; m () <a href="src/Pos.Lrc.DB.Leaders.html#putLeaders" class="link">Source</a> <a href="#v:putLeaders" class="selflink">#</a></p></div><h1 id="g:3">Initialization</h1><div class="top"><p class="src"><a id="v:prepareLrcLeaders" class="def">prepareLrcLeaders</a> :: (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; m () <a href="src/Pos.Lrc.DB.Leaders.html#prepareLrcLeaders" class="link">Source</a> <a href="#v:prepareLrcLeaders" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:prepareLrcDB" class="def">prepareLrcDB</a> :: (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; m () <a href="src/Pos.Lrc.DB.Lrc.html#prepareLrcDB" class="link">Source</a> <a href="#v:prepareLrcDB" class="selflink">#</a></p><div class="doc"><p>Put missing initial data into LRC DB.</p></div></div><h1 id="g:4">Initialization</h1><div class="top"><p class="src"><a id="v:prepareLrcRichmen" class="def">prepareLrcRichmen</a> :: (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; m () <a href="src/Pos.Lrc.DB.Richmen.html#prepareLrcRichmen" class="link">Source</a> <a href="#v:prepareLrcRichmen" class="selflink">#</a></p></div><h1 id="g:5">Concrete instances</h1><h2 id="g:6">Ssc</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RCSsc" class="def">RCSsc</a> <a href="src/Pos.Lrc.DB.Richmen.html#RCSsc" class="link">Source</a> <a href="#t:RCSsc" class="selflink">#</a></p><div class="subs instances"><p id="control.i:RCSsc" class="caption collapser" onclick="toggleSection('i:RCSsc')">Instances</p><div id="section.i:RCSsc" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:RCSsc:RichmenComponent:1" class="instance expander" onclick="toggleSection('i:id:RCSsc:RichmenComponent:1')"></span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenComponent">RichmenComponent</a> <a href="Pos-Lrc.html#t:RCSsc">RCSsc</a></span> <a href="src/Pos.Lrc.DB.Richmen.html#line-90" class="link">Source</a> <a href="#t:RCSsc" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:RCSsc:RichmenComponent:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCSsc">RCSsc</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="#t:RichmenData" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rcToData">rcToData</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCSsc">RCSsc</a> <a href="#v:rcToData" class="selflink">#</a></p><p class="src"><a href="#v:rcTag">rcTag</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCSsc">RCSsc</a> -&gt; <a href="http://hackage.haskell.org/package/bytestring-0.10.8.1/docs/Data-ByteString.html#t:ByteString">ByteString</a> <a href="#v:rcTag" class="selflink">#</a></p><p class="src"><a href="#v:rcInitialThreshold">rcInitialThreshold</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCSsc">RCSsc</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:CoinPortion">CoinPortion</a> <a href="#v:rcInitialThreshold" class="selflink">#</a></p><p class="src"><a href="#v:rcConsiderDelegated">rcConsiderDelegated</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCSsc">RCSsc</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="#v:rcConsiderDelegated" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:RCSsc:RichmenData:2" class="instance expander" onclick="toggleSection('i:id:RCSsc:RichmenData:2')"></span> <span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCSsc">RCSsc</a></span> <a href="src/Pos.Lrc.DB.Richmen.html#line-91" class="link">Source</a> <a href="#t:RCSsc" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:RCSsc:RichmenData:2" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCSsc">RCSsc</a> = <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:getRichmenSsc" class="def">getRichmenSsc</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a>) <a href="src/Pos.Lrc.DB.Richmen.html#getRichmenSsc" class="link">Source</a> <a href="#v:getRichmenSsc" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:putRichmenSsc" class="def">putRichmenSsc</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; m () <a href="src/Pos.Lrc.DB.Richmen.html#putRichmenSsc" class="link">Source</a> <a href="#v:putRichmenSsc" class="selflink">#</a></p></div><h2 id="g:7">US</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RCUs" class="def">RCUs</a> <a href="src/Pos.Lrc.DB.Richmen.html#RCUs" class="link">Source</a> <a href="#t:RCUs" class="selflink">#</a></p><div class="subs instances"><p id="control.i:RCUs" class="caption collapser" onclick="toggleSection('i:RCUs')">Instances</p><div id="section.i:RCUs" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:RCUs:RichmenComponent:1" class="instance expander" onclick="toggleSection('i:id:RCUs:RichmenComponent:1')"></span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenComponent">RichmenComponent</a> <a href="Pos-Lrc.html#t:RCUs">RCUs</a></span> <a href="src/Pos.Lrc.DB.Richmen.html#line-111" class="link">Source</a> <a href="#t:RCUs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:RCUs:RichmenComponent:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCUs">RCUs</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="#t:RichmenData" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rcToData">rcToData</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCUs">RCUs</a> <a href="#v:rcToData" class="selflink">#</a></p><p class="src"><a href="#v:rcTag">rcTag</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCUs">RCUs</a> -&gt; <a href="http://hackage.haskell.org/package/bytestring-0.10.8.1/docs/Data-ByteString.html#t:ByteString">ByteString</a> <a href="#v:rcTag" class="selflink">#</a></p><p class="src"><a href="#v:rcInitialThreshold">rcInitialThreshold</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCUs">RCUs</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:CoinPortion">CoinPortion</a> <a href="#v:rcInitialThreshold" class="selflink">#</a></p><p class="src"><a href="#v:rcConsiderDelegated">rcConsiderDelegated</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCUs">RCUs</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="#v:rcConsiderDelegated" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:RCUs:RichmenData:2" class="instance expander" onclick="toggleSection('i:id:RCUs:RichmenData:2')"></span> <span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCUs">RCUs</a></span> <a href="src/Pos.Lrc.DB.Richmen.html#line-112" class="link">Source</a> <a href="#t:RCUs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:RCUs:RichmenData:2" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCUs">RCUs</a> = <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:getRichmenUS" class="def">getRichmenUS</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a>) <a href="src/Pos.Lrc.DB.Richmen.html#getRichmenUS" class="link">Source</a> <a href="#v:getRichmenUS" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:putRichmenUS" class="def">putRichmenUS</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; m () <a href="src/Pos.Lrc.DB.Richmen.html#putRichmenUS" class="link">Source</a> <a href="#v:putRichmenUS" class="selflink">#</a></p></div><h2 id="g:8">Delegation</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RCDlg" class="def">RCDlg</a> <a href="src/Pos.Lrc.DB.Richmen.html#RCDlg" class="link">Source</a> <a href="#t:RCDlg" class="selflink">#</a></p><div class="subs instances"><p id="control.i:RCDlg" class="caption collapser" onclick="toggleSection('i:RCDlg')">Instances</p><div id="section.i:RCDlg" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:RCDlg:RichmenComponent:1" class="instance expander" onclick="toggleSection('i:id:RCDlg:RichmenComponent:1')"></span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenComponent">RichmenComponent</a> <a href="Pos-Lrc.html#t:RCDlg">RCDlg</a></span> <a href="src/Pos.Lrc.DB.Richmen.html#line-132" class="link">Source</a> <a href="#t:RCDlg" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:RCDlg:RichmenComponent:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCDlg">RCDlg</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="#t:RichmenData" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:rcToData">rcToData</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCDlg">RCDlg</a> <a href="#v:rcToData" class="selflink">#</a></p><p class="src"><a href="#v:rcTag">rcTag</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCDlg">RCDlg</a> -&gt; <a href="http://hackage.haskell.org/package/bytestring-0.10.8.1/docs/Data-ByteString.html#t:ByteString">ByteString</a> <a href="#v:rcTag" class="selflink">#</a></p><p class="src"><a href="#v:rcInitialThreshold">rcInitialThreshold</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCDlg">RCDlg</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:CoinPortion">CoinPortion</a> <a href="#v:rcInitialThreshold" class="selflink">#</a></p><p class="src"><a href="#v:rcConsiderDelegated">rcConsiderDelegated</a> :: <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Proxy.html#t:Proxy">Proxy</a> <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Kind.html#t:-42-">*</a> <a href="Pos-Lrc.html#t:RCDlg">RCDlg</a> -&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Bool.html#t:Bool">Bool</a> <a href="#v:rcConsiderDelegated" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:RCDlg:RichmenData:2" class="instance expander" onclick="toggleSection('i:id:RCDlg:RichmenData:2')"></span> <span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCDlg">RCDlg</a></span> <a href="src/Pos.Lrc.DB.Richmen.html#line-133" class="link">Source</a> <a href="#t:RCDlg" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:RCDlg:RichmenData:2" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Class.html#t:RichmenData">RichmenData</a> <a href="Pos-Lrc.html#t:RCDlg">RCDlg</a> = <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:Richmen">Richmen</a></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:getRichmenDlg" class="def">getRichmenDlg</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:Richmen">Richmen</a>) <a href="src/Pos.Lrc.DB.Richmen.html#getRichmenDlg" class="link">Source</a> <a href="#v:getRichmenDlg" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:putRichmenDlg" class="def">putRichmenDlg</a> :: <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> -&gt; m () <a href="src/Pos.Lrc.DB.Richmen.html#putRichmenDlg" class="link">Source</a> <a href="#v:putRichmenDlg" class="selflink">#</a></p></div><div class="top"><p class="src">module <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-DB-Seed.html">Pos.Lrc.DB.Seed</a></p></div><div class="top"><p class="src">module <a href="Pos-Lrc-FtsPure.html">Pos.Lrc.FtsPure</a></p></div><div class="top"><p class="src"><a id="v:findRichmenStake" class="def">findRichmenStake</a> <a href="#v:findRichmenStake" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>) m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a></td><td class="doc"><p>Eligibility threshold</p></td></tr><tr><td class="src">-&gt; m <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Find nodes which have at least 'eligibility threshold' coins.</p></div></div><div class="top"><p class="src"><a id="v:findRichmenPure" class="def">findRichmenPure</a> :: [(<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>)] -&gt; (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>) -&gt; <a href="Pos-Lrc.html#t:RichmenType">RichmenType</a> -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:FullRichmenData">FullRichmenData</a> <a href="src/Pos.Lrc.Logic.html#findRichmenPure" class="link">Source</a> <a href="#v:findRichmenPure" class="selflink">#</a></p><div class="doc"><p>Pure version of findRichmen which uses in-memory Utxo.</p></div></div><div class="top"><p class="src"><a id="v:findAllRichmenMaybe" class="def">findAllRichmenMaybe</a> <a href="src/Pos.Lrc.Logic.html#findAllRichmenMaybe" class="link">Source</a> <a href="#v:findAllRichmenMaybe" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>) m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a></td><td class="doc"><p>Eligibility threshold (optional)</p></td></tr><tr><td class="src">-&gt; <a href="http://hackage.haskell.org/package/base-4.9.1.0/docs/Data-Maybe.html#t:Maybe">Maybe</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a></td><td class="doc"><p>Delegation threshold (optional)</p></td></tr><tr><td class="src">-&gt; m (<a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a>, <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Function considers all variants of computation
 and compute using one pass by stake DB and one pass by delegation DB.</p></div></div><div class="top"><p class="src"><a id="v:findDelegatedRichmen" class="def">findDelegatedRichmen</a> :: (<a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Util-Iterator.html#t:MonadIterator">MonadIterator</a> (<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a>) m) =&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; m <a href="http://hackage.haskell.org/package/cardano-sl-lrc-0.4.3/docs/Pos-Lrc-Types.html#t:RichmenStake">RichmenStake</a> <a href="src/Pos.Lrc.Logic.html#findDelegatedRichmen" class="link">Source</a> <a href="#v:findDelegatedRichmen" class="selflink">#</a></p><div class="doc"><p>Find delegated richmen.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RichmenType" class="def">RichmenType</a> <a href="src/Pos.Lrc.Logic.html#RichmenType" class="link">Source</a> <a href="#t:RichmenType" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RTUsual" class="def">RTUsual</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:RTDelegation" class="def">RTDelegation</a> (<a href="http://hackage.haskell.org/package/unordered-containers-0.2.8.0/docs/Data-HashMap-Lazy.html#t:HashMap">HashMap</a> <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> [<a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>])</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:lrcOnNewSlotWorker" class="def">lrcOnNewSlotWorker</a> :: (<a href="Pos-Ssc-Class.html#t:SscWorkersClass">SscWorkersClass</a> ssc, <a href="Pos-WorkMode.html#t:WorkMode">WorkMode</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDBCore">MonadDBCore</a> m) =&gt; m (<a href="http://hackage.haskell.org/package/containers-0.5.7.1/docs/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:NodeId">NodeId</a>) -&gt; (<a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:WorkerSpec">WorkerSpec</a> m, <a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:OutSpecs">OutSpecs</a>) <a href="src/Pos.Lrc.Worker.html#lrcOnNewSlotWorker" class="link">Source</a> <a href="#v:lrcOnNewSlotWorker" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lrcSingleShot" class="def">lrcSingleShot</a> :: (<a href="Pos-Ssc-Class.html#t:SscWorkersClass">SscWorkersClass</a> ssc, <a href="Pos-WorkMode.html#t:WorkMode">WorkMode</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDBCore">MonadDBCore</a> m) =&gt; m (<a href="http://hackage.haskell.org/package/containers-0.5.7.1/docs/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:NodeId">NodeId</a>) -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m () <a href="src/Pos.Lrc.Worker.html#lrcSingleShot" class="link">Source</a> <a href="#v:lrcSingleShot" class="selflink">#</a></p><div class="doc"><p>Run leaders and richmen computation for given epoch. If stable
 block for this epoch is not known, LrcError will be thrown.</p></div></div><div class="top"><p class="src"><a id="v:lrcSingleShotNoLock" class="def">lrcSingleShotNoLock</a> :: (<a href="Pos-Ssc-Class.html#t:SscWorkersClass">SscWorkersClass</a> ssc, <a href="Pos-WorkMode.html#t:WorkMode">WorkMode</a> ssc m, <a href="http://hackage.haskell.org/package/cardano-sl-db-0.4.3/docs/Pos-DB-Class.html#t:MonadDBCore">MonadDBCore</a> m) =&gt; m (<a href="http://hackage.haskell.org/package/containers-0.5.7.1/docs/Data-Set.html#t:Set">Set</a> <a href="http://hackage.haskell.org/package/cardano-sl-infra-0.4.3/docs/Pos-Communication-Types-Protocol.html#t:NodeId">NodeId</a>) -&gt; <a href="http://hackage.haskell.org/package/cardano-sl-core-0.4.3/docs/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m () <a href="src/Pos.Lrc.Worker.html#lrcSingleShotNoLock" class="link">Source</a> <a href="#v:lrcSingleShotNoLock" class="selflink">#</a></p><div class="doc"><p>Same, but doesn't take lock on the semaphore.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>